<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>jsMind</title>
    <link type="text/css" rel="stylesheet" href="../style/jsmind.css" />
    <style type="text/css">
        .jsmind_container{
            width:800px;
            height:500px;
            border:solid 1px #ccc;
            /*background:#f4f4f4;*/
            background:#f4f4f4;
        }
    </style>
</head>
<body>
<div id="test">

</div>

<script type="text/javascript" src="../js/jsmind.js"></script>
<script type="text/javascript" src="../js/jsmind.draggable.js"></script>
<script type="text/javascript" src="../../bootstrap/js/jquery-2.1.3.min.js"></script>
<script type="text/javascript">
	//var testhtml = "<div><span>sub11</span><input type='button'></input></div>";
	var jm = null;
    function load_jsmind(tempId){
        var mind = {
            "meta":{
                "name":"demo",
                "author":"hizzgdev@163.com",
                "version":"0.2",
            },
            "format":"node_array",
            "data":[
                {"id":"root", "isroot":true, "topic":"jsMind"},

                {"id":"sub1", "parentid":"root", "topic":"sub1", "background-color":"#0000ff"},
                {"id":"sub11", "parentid":"sub1", "topic":"<div style='font-size:12px;lineheight:1.2em;'><div style='color:red;'>BJX673<input type='button' value='按钮' onclick='test()'></input></div><div style='margin-top:10px;'>北极星钢铁</div><div style='margin-top:5px;'>规格2.5*1219</div><div style='margin-top:5px;'>[C19区]10.3吨(1)</div></div>"},
                {"id":"sub12", "parentid":"sub1", "topic":"sub12"},
                {"id":"sub13", "parentid":"sub1", "topic":"sub13"},

                {"id":"sub2", "parentid":"root", "topic":"sub2"},
                {"id":"sub21", "parentid":"sub2", "topic":"sub21"},
                {"id":"sub22", "parentid":"sub2", "topic":"sub22","foreground-color":"#33ff33"},

                {"id":"sub3", "parentid":"root", "topic":"sub3"},
            ]
        };
        var options = {
            container:tempId,
            editable:true,
            theme:'primary'
        };
        jm = jsMind.show(options,mind);
        // jm.set_readonly(true);
        // var mind_data = jm.get_data();
        // alert(mind_data);
        jm.add_node("sub2","sub23", "new node", {"background-color":"red"});
        jm.set_node_color('sub21', 'green', '#ccc');
    }
	function test(){
		var selected_node = jm.get_selected_node();
		alert(1);
		console.info(selected_node);
	}
    
	function loadList(){
		for(var i = 0; i < 2; i++){
			var tempId = "jsmind_container_"+ i;
			$('#test').appand('<div class="jsmind_container" id='+tempId+'></div>');
			load_jsmind(tempId);
		}
	}
	
	loadList();
</script>
</body>
</html>
